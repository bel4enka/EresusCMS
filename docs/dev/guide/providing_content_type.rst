Предоставление типа раздела (типа контента)
===========================================

В Eresus CMS каждый раздел сайта имеет свой собственный тип. Есть несколько встроенных простых типов,
таких как текстовые страницы, списки подразделов и перенаправления. Модуль расширения может
предоставить свой собственный тип контента, что позволит администраторам сайта создавать разделы
этого типа. Например, модуль «Каталог товаров» может предоставлять одноимённый тип для создания
разделов «Каталог товаров».

Есть ряд ограничений:

#. один модуль может предоставлять только один тип контента;
#. имя типа всегда совпадает с названием модуля.

Для предоставления типа раздела надо сделать следующее:

#. Унаследовать :doc:`основной класс модуля<../structure/skeleton>` от класса
   `ContentPlugin <../../api/classes/ContentPlugin.html>`_ или его потомка.
#. Переопределить в нём метод
   `clientRenderContent <../../api/classes/ContentPlugin.html#method_clientRenderContent>`_.
#. Это не обязательно, но можно переопределить метод
   `adminRenderContent <../../api/classes/ContentPlugin.html#method_adminRenderContent>`_, чтобы
   предоставить администратору интерфейс для управления контентом в разделах предоставляемого вашим
   модулем типа.

clientRenderContent
-------------------

Этот метод будет вызван при обращении пользователя к любому адресу в любом разделе, обслуживаемым
вашим модулем (т. е. в разделе, в качестве типа которого выбран ваш модуль).

Метод должен возвращать разметку области контента страницы либо объект класса
`Eresus_HTTP_Response <../../api/classes/Eresus_HTTP_Response.html>`_.

.. code-block:: php

   <?php
   class MyPlugin extends ContentPlugin
   {
      public $title = 'Мой модуль';
      ...
      public function clientRenderContent(Eresus_CMS_Request $request, Eresus_CMS_Page $page)
      {
          return '<h1>Привет!</h1>';
      }

В приведённом примере в раздела типа «Мой модуль» на странице будет выводиться заголовок «Привет!».

adminRenderContent
-------------------

Этот метод будет вызван при выборе в :doc:`меню разделов</manage/ui/menu-content>` раздела,
обслуживаемого вашим модулем.

Метод должен возвращать разметку HTML, которая будет показана в
:doc:`рабочей области</manage/ui/overview>`.

.. code-block:: php

   <?php
   class MyPlugin extends ContentPlugin
   {
      ...
      public function adminRenderContent()
      {
          ... // К примеру, создаём здесь разметку диалога и помещаем её в переменную $html;
          return $html;
      }


