Первые шаги
===========

Тестовый сайт
-------------

Для тестирования вашего модуля вам понадобится тестовый сайт, работающий на Eresus CMS. Он может
расположен как на хостинге, так и на вашем компьютере, это не имеет значения. В этом руководстве мы
будем исходить из следующих предположений:

#. файлы тестового сайта размещаются в папке ``/srv/www/htdocs`` (в дальнейшем, просто ``htdocs``)
#. сам тестовый сайт доступен по адресу ``http://localhost/``

Как установить и настроить Eresus CMS описано в :doc:`Руководстве администратора<../../manage/index>`.

Начало разработки модуля
------------------------

В зависимости от условий и опыта разработчика, процесс разработки может быть организован самыми
разными способами. Но для целей этого руководства мы будем рассматривать самый простой в применении,
хоть и **не самый правильный** способ: файлы разрабатываемого модуля размещаются сразу в дереве
файлов сайта, где в дальнейшем и ведётся вся работа над модулем.

Для начала в папке ``htdocs/plugins`` (в дальнейшем просто ``/plugins``) создайте папку,
идентифицирующую вас как разработчика. Это может быть название вашей компании (рекомендуется), ваше
прозвище или ещё что-то, что позволит избежать конфликта имён с другими разработчиками. Также, имя
этой папки станет первой частью в пространстве имён вашего модуля. Допустим, эта папка будет
называться «Acme».

Создайте внутри папки ``/plugins/Acme`` ещё одну папку, и назовите её по имени разрабатываемого
модуля. Если вы назвали свой модуль «Foo», то у вас должен такой путь: ``/plugins/Acme/Foo``. Это
**корневая папка модуля расширения**. А «Foo» станет второй частью пространства имён вашего модуля.

.. note::
   Подробнее о структуре папок написано в разделе :doc:`../structure/files`.

plugin.yml
----------

Создайте в корневой папке модуля файл с именем ``plugin.yml`` следующего содержания:

.. code-block:: yaml

   title: "Тестовый модуль"
   version: "1.00"
   requires:
       cms: {min: "${product.version}", max: "${product.version}"}

Этот файл предоставляет CMS общие сведения о вашем модуле, а также описывает некоторые его
характеристики и возможности. Выше приведён минимально необходимый набор свойств:

  * **title** --- название вашего модуля, может быть произвольным;
  * **version** --- версия вашего модуля, используйте форматы, поддерживаемые функцией
    `version_compare <http://www.php.net/version_compare>`_;
  * **requires** --- перечисление компонентов и их версий, необходимых для работы вашего модуля. Для
    начала укажите здесь версию установленной у вас на тестовом сайте Eresus CMS.

.. note::
   Подробнее о формате файла plugin.yml написано в разделе :doc:`../reference/plugin.yml`.

Bundle.php
----------

Т.к. модуль расширения Eresus CMS --- это пакет Symfony, то в корневой папке модуля надо создать
файл с именем ``Bundle.php`` следующего содержания:

.. code-block:: php

   <?php
   namespace Acme\Foo;

   use Eresus\CmsBundle\Extensions\PluginBundle;

   class Bundle extends PluginBundle
   {
   }

Обратите внимание, что этот файл отличается от обычного для Symfony: другой класс-предок и другое
имя класса.

.. note::
   Подробнее о формате файла Bundle.php написано в разделе :doc:`../reference/Bundle.php`.

Подключение
-----------

После выполнения предыдущих шагов у вас будет готовый к использованию модуль расширения. Он, правда,
пока ничего не умеет делать, но его уже можно подключить к CMS
(см. :doc:`../../manage/site/plugins/install`). О том, как добавить к вашему модулю полезную
нагрузку, читайте в последующих разделах этого руководства.